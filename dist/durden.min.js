!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Durden=t()}}(function(){return function a(l,s,o){function u(e,t){if(!s[e]){if(!l[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[e]={exports:{}};l[e][0].call(r.exports,function(t){return u(l[e][1][t]||t)},r,r.exports,a,l,s,o)}return s[e].exports}for(var h="function"==typeof require&&require,t=0;t<o.length;t++)u(o[t]);return u}({1:[function(t,e,i){"use strict";var n,a=(n=t("./tiling"))&&n.__esModule?n:{default:n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function r(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.canvas=window.document.createElement("canvas"),t.appendChild(this.canvas),paper.setup(this.canvas),paper.view.applyMatrix=!1,this.tiling=new a.default(e,i),this.bcdeLen=50;var n=a.default.MAX_B;this.transformTiles(this.bcdeLen,n,!0),paper.view.update(),paper.view.on("frame",function(){TWEEN.update()})}return function(t,e,i){e&&l(t.prototype,e),i&&l(t,i)}(r,[{key:"getShuffledTiles",value:function(){for(var t=this.tiling.getAllTiles(),e=t.length;0!==e;){var i=Math.floor(Math.random()*e),n=t[e-=1];t[e]=t[i],t[i]=n}return t}},{key:"showTilesRandom",value:function(t){return r.showTiles(this.getShuffledTiles(),t)}},{key:"showTilesOrdered",value:function(t){return r.showTiles(this.tiling.getAllTiles(),t)}},{key:"getBounds",value:function(){var t=this.tiling.superTiles[0][0].group.bounds.center,e=this.tiling.superTiles[0][this.tiling.m-1].group.bounds.center,i=this.tiling.superTiles[this.tiling.n-1][0].group.bounds.center,n=this.tiling.superTiles[this.tiling.n-1][this.tiling.m-1].group.bounds.center,r=Math.min(t.x,i.x),a=Math.max(e.x,n.x),l=Math.min(t.y,e.y,i.y,n.y),s=Math.max(t.y,e.y,i.y,n.y);return new paper.Rectangle({from:new paper.Point(r,l),to:new paper.Point(a,s)})}},{key:"transformTilesAnimated",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e&&e,r=[a.default.MIN_B,a.default.MIN_B+(a.default.MAX_B-a.default.MIN_B)/4,a.default.MIN_B+(a.default.MAX_B-a.default.MIN_B)/4*2,a.default.MIN_B+(a.default.MAX_B-a.default.MIN_B)/4*3,a.default.MAX_B];return new TWEEN.Tween({angle:r[4]}).to({angle:r[0]},t).easing(TWEEN.Easing.Sinusoidal.InOut).onUpdate(function(t){i.transformTiles(i.bcdeLen,t.angle,n)}).repeat(1/0).yoyo(!0).start()}},{key:"transformTiles",value:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i;this.tiling.transform(t,e);var r=this.getBounds();n&&(paper.view.getViewSize().width>r.width||(paper.view.getViewSize().height,r.height),paper.view.setScaling(Math.max(paper.view.getViewSize().width/r.width,paper.view.getViewSize().height/r.height))),paper.view.setCenter(r.getCenter())}},{key:"setStroke",value:function(e,i){this.tiling.getAllTiles().forEach(function(t){t.setStroke(e,i)})}},{key:"colorSuperTilesRandom",value:function(i){this.tiling.getAllSuperTiles().forEach(function(t){var e=i[Math.floor(Math.random()*i.length)];t.tile1.path.fillColor=e,t.tile2.path.fillColor=e,t.tile3.path.fillColor=e,t.tile4.path.fillColor=e})}},{key:"colorTilesRandom",value:function(e){this.tiling.getAllTiles().forEach(function(t){t.path.fillColor=e[Math.floor(Math.random()*e.length)]})}},{key:"colorTilesPeriodic",value:function(i){this.tiling.getAllTiles().forEach(function(t,e){t.path.fillColor=i[e%i.length]})}},{key:"colorSuperTilesPeriodic",value:function(i){this.tiling.getAllTiles().forEach(function(t,e){t.path.fillColor=i[Math.floor(e/4)%i.length]})}}],[{key:"showTiles",value:function(n,t){n.forEach(function(t){t.path.opacity=0});var r=0;return new TWEEN.Tween({last:0}).to({last:n.length-1},t).easing(TWEEN.Easing.Sinusoidal.InOut).onUpdate(function(t){for(var e=Math.floor(t.last),i=r;i<=e;i+=1)n[i].path.opacity=1;r=e}).start()}}]),r}();r.Themes={RGB:["#ff9999","#99ff99","#9999ff","#ff99ff"],Spring:["#54678C","#9BDAF2","#F2C12E","#F2E1C2","#D95252"],Flowers:["#D95B96","#BABF1B","#D9981E","#D9751E","#8C1616"],Autumn:["#A62447","#D9326F","#525F43","#6C2A35","#D9936A"],Winter:["#0B0340","#263973","#495F8C","#A0CCF2","#514071"],Christmas:["#F2293A","#F24464","#678C5D","#730202","#BFBFBD"]},e.exports={Durden:r,Themes:r.Themes}},{"./tiling":4}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,r=(n=t("./tile"))&&n.__esModule?n:{default:n};function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tile1=new r.default("#ff9999",!1,!1),this.tile2=new r.default("#99ff99",!0,!1),this.tile3=new r.default("#9999ff",!1,!0),this.tile4=new r.default("#ff99ff",!0,!0),this.group=new paper.Group([this.tile1.path,this.tile2.path,this.tile3.path,this.tile4.path]),this.group.applyMatrix=!1}return function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(t,[{key:"transform",value:function(t,e){this.tile1.transform(t,e),this.tile2.copyShape(this.tile1,!1),this.tile3.copyShape(this.tile1,!1),this.tile4.copyShape(this.tile1,!1),this.tile2.path.rotate(this.tile1.vE.subtract(this.tile1.vA).getAngle()-this.tile2.vE.subtract(this.tile2.vA).getAngle()),this.tile2.path.translate(this.tile1.vA.subtract(this.tile2.vA)),this.tile3.path.rotate(this.tile1.vE.subtract(this.tile1.vD).getAngle()-this.tile3.vD.subtract(this.tile3.vC).getAngle()),this.tile3.path.translate(this.tile1.vE.subtract(this.tile3.vD)),this.tile4.path.rotate(this.tile3.vE.subtract(this.tile3.vA).getAngle()-this.tile4.vE.subtract(this.tile4.vA).getAngle()),this.tile4.path.translate(this.tile3.vA.subtract(this.tile4.vA))}},{key:"copyShape",value:function(t){this.tile1.copyShape(t.tile1),this.tile2.copyShape(t.tile2),this.tile3.copyShape(t.tile3),this.tile4.copyShape(t.tile4)}},{key:"north",get:function(){return this.group.localToParent(this.tile1.vA)}},{key:"nne",get:function(){return this.group.localToParent(this.tile1.vB)}},{key:"nee",get:function(){return this.group.localToParent(this.tile1.vC)}},{key:"south",get:function(){return this.group.localToParent(this.tile3.vA)}},{key:"se",get:function(){return this.group.localToParent(this.tile3.vB)}},{key:"ssw",get:function(){return this.group.localToParent(this.tile4.vB)}},{key:"sww",get:function(){return this.group.localToParent(this.tile4.vC)}},{key:"east",get:function(){return this.group.localToParent(this.tile1.vD)}},{key:"west",get:function(){return this.group.localToParent(this.tile2.vC)}},{key:"nw",get:function(){return this.group.localToParent(this.tile2.vB)}}]),t}();i.default=l},{"./tile":3}],3:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(){function r(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.path=new paper.Path,this.path.closed=!0,this.path.applyMatrix=!1,this.path.scale(e?-1:1,i?-1:1),this.path.fillColor=t,this.path.strokeColor="#999999",this.path.strokeWidth=1;for(var n=0;n<5;n+=1)this.path.add(new paper.Point(0,0))}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(r,[{key:"transform",value:function(e,t){var i=this.path.segments,n=360-2*t,r=(180-t)/2,a=2*Math.sin(t/2*Math.PI/180),l=Math.sqrt(a*a+4-2*a*2*Math.cos((n-r)*Math.PI/180)),s=[0,t,n,2*Math.asin(Math.sin((n-r)*Math.PI/180)/l*a)*180/Math.PI],o=0;[1,2,3,4].forEach(function(t){o+=180-s[t-1],i[t].point.set(i[t-1].point.add(new paper.Point({length:e,angle:o})))})}},{key:"setStroke",value:function(t,e){this.path.strokeWidth=t,this.path.strokeColor=e}},{key:"setColor",value:function(t){this.path.fillColor=t}},{key:"copyShape",value:function(t,e){for(var i=!(1<arguments.length&&void 0!==e)||e,n=1;n<=4;n+=1)this.path.segments[n].point.set(t.path.segments[n].point);i&&this.path.setMatrix(t.path.getMatrix())}},{key:"vA",get:function(){return this.path.localToParent(this.path.segments[0].point)}},{key:"vB",get:function(){return this.path.localToParent(this.path.segments[1].point)}},{key:"vC",get:function(){return this.path.localToParent(this.path.segments[2].point)}},{key:"vD",get:function(){return this.path.localToParent(this.path.segments[3].point)}},{key:"vE",get:function(){return this.path.localToParent(this.path.segments[4].point)}}]),r}();i.default=r},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,a=(n=t("./supertile"))&&n.__esModule?n:{default:n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.n=t,this.m=e,this.superTiles=r.createMatrix(this.n,this.m);for(var i=0;i<this.n;i+=1)for(var n=0;n<this.m;n+=1)this.superTiles[i][n]=new a.default,n%2==1&&this.superTiles[i][n].group.scale(1,-1)}return function(t,e,i){e&&l(t.prototype,e),i&&l(t,i)}(r,[{key:"transform",value:function(t,e){var i=this.superTiles[0][0];i.transform(t,e);var n=180-i.tile4.vB.subtract(i.tile1.vC).getAngle(),r=e+i.tile2.vB.subtract(i.tile2.vA).getAngle();this.superTiles[0][0].group.rotation=n;for(var a=0;a<this.n;a+=1)for(var l=0;l<this.m;l+=1)if(0!==a||0!==l){this.superTiles[a][l].copyShape(i),this.superTiles[a][l].group.rotation=l%2==1?n+r:n;var s=[];0<a&&(l%2==1?s.push(this.superTiles[a-1][l].sww.subtract(this.superTiles[a][l].nne)):s.push(this.superTiles[a-1][l].nne.subtract(this.superTiles[a][l].sww))),0<l&&s.push(this.superTiles[a][l-1].south.subtract(this.superTiles[a][l].west)),1===s.length&&this.superTiles[a][l].group.translate(s[0]),2===s.length&&this.superTiles[a][l].group.translate(s[0].add(s[1]).multiply(.5))}}},{key:"getAllTiles",value:function(){var e=[];return this.superTiles.forEach(function(t){t.forEach(function(t){e.push(t.tile1),e.push(t.tile2),e.push(t.tile3),e.push(t.tile4)})}),e}},{key:"getAllSuperTiles",value:function(){var e=[];return this.superTiles.forEach(function(t){t.forEach(function(t){e.push(t)})}),e}}],[{key:"createMatrix",value:function(t,e){for(var i=[],n=0;n<t;n+=1){for(var r=[],a=0;a<e;a+=1)r.push([]);i.push(r)}return i}}]),r}();(i.default=r).MIN_B=74,r.MAX_B=156},{"./supertile":2}]},{},[1])(1)});
//# sourceMappingURL=durden.min.js.map
